process Photon =
{
 source = PoolSource
  {
    # Number of events program should run
    untracked vstring fileNames = {'file:rechits.root'}

    untracked int32 maxEvents = 1000
  }



#magnetic field
include "Geometry/CMSCommonData/data/cmsMagneticFieldXML.cfi"

# for the geometry:
# full detector geometry
include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"

#--------------------------------
# Ecalgeometry for clustering
#--------------------------------
# must fix geometryForClustering.cff to use 
# CMSSW/MagneticField/Engine/data/volumeBasedMagneticField.cfi
# insetad of "Geometry/CaloEventSetup/test/data/testCaloConfiguration.cfi"
#
#include "RecoEcal/EgammaClusterProducers/data/geometryForClustering.cff"
include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"

#
# clusteribg sequence
#
include "RecoEcal/EgammaClusterProducers/data/islandClusteringSequence.cff"
include "RecoEcal/EgammaClusterProducers/data/hybridClusteringSequence.cff"

# photon sequence
include "RecoEgamma/EgammaPhotonProducers/data/photonSequence.cff"

path p1 = { islandClusteringSequence&hybridClusteringSequence, photonSequence }


  module o1 = PoolOutputModule
   {
    
      untracked string fileName = "photons.root"
      untracked vstring outputCommands = 
      {
        "keep *"
      }
   }
   endpath outpath = { o1 }
}
